{"version":3,"sources":["src/modules/directives/sticky.js"],"names":["getScrollEventTarget","element","currentNode","tagName","nodeType","overflowY","document","defaultView","getComputedStyle","parentNode","window","cssSupport","attr","value","createElement","style","sticky","bind","el","binding","vnode","inserted","target","console","error","top","addEventListener","getBoundingClientRect","position","scrollTop","update","componentUpdated","unbind"],"mappings":"AAAA;;;AAGA;;;AAGA;AACA,IAAIA,uBAAuB,UAAUC,OAAV,EAAmB;AAC1C,QAAIC,cAAcD,OAAlB;AACA,WAAOC,eAAeA,YAAYC,OAAZ,KAAwB,MAAvC,IACPD,YAAYC,OAAZ,KAAwB,MADjB,IAC2BD,YAAYE,QAAZ,KAAyB,CAD3D,EAC8D;AAC1D,YAAIC,YAAYC,SAASC,WAAT,CAAqBC,gBAArB,CAAsCN,WAAtC,EAAmDG,SAAnE;AACA,YAAIA,cAAc,QAAd,IAA0BA,cAAc,MAA5C,EAAoD;AAChD,mBAAOH,WAAP;AACH;AACDA,sBAAcA,YAAYO,UAA1B;AACH;AACD,WAAOC,MAAP;AACH,CAXD;AAYA;AACA,IAAIC,aAAa,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;AACpC,QAAIZ,UAAUK,SAASQ,aAAT,CAAuB,KAAvB,CAAd;AACA,QAAIF,QAAQX,QAAQc,KAApB,EAA2B;AACvBd,gBAAQc,KAAR,CAAcH,IAAd,IAAsBC,KAAtB;AACA,eAAOZ,QAAQc,KAAR,CAAcH,IAAd,MAAwBC,KAA/B;AACH,KAHD,MAGO;AACH,eAAO,KAAP;AACH;AACJ,CARD;AASA,OAAO,IAAIG,SAAS;AAChB;AACAC,UAAM,UAAUC,EAAV,EAAcC,OAAd,EAAuBC,KAAvB,EAA8B;AAChC;AACH,KAJe;AAKhBC,cAAU,UAAUH,EAAV,EAAcC,OAAd,EAAuB;AAC7B;AACA,YAAIG,SAAStB,qBAAqBkB,EAArB,CAAb;AACA,YAAGI,WAAWJ,GAAGT,UAAjB,EAA6B;AACzBc,oBAAQC,KAAR,CAAc,+BAAd;AACH,SAFD,MAEM,IAAIb,WAAW,UAAX,EAAuB,QAAvB,CAAJ,EAAsC;AACxC;AACH;;AAED,YAAIc,MAAMN,QAAQN,KAAR,GAAgBM,QAAQN,KAAxB,GAAgC,CAA1C;AACAS,eAAOI,gBAAP,CAAwB,QAAxB,EAAkC,MAAK;AACnC,gBAAIR,GAAGS,qBAAH,GAA2BF,GAA3B,GAAiCA,GAArC,EAA0C;AACtCP,mBAAGH,KAAH,CAASa,QAAT,GAAoB,OAApB;AACH;AACD,gBAAIN,OAAOO,SAAP,IAAoB,CAAxB,EAA2B;AACvBX,mBAAGH,KAAH,CAASa,QAAT,GAAoB,EAApB;AACH;AACJ,SAPD;AAQH,KAvBe;AAwBhBE,YAAQ,UAAUZ,EAAV,EAAcC,OAAd,EAAuB,CAE9B,CA1Be;AA2BhBY,sBAAkB,UAAUb,EAAV,EAAcC,OAAd,EAAuB;AACrC;AACH,KA7Be;AA8BhBa,YAAQ,UAAUd,EAAV,EAAcC,OAAd,EAAuB;AAC3B;AACH;AAhCe,CAAb","file":"sticky.js","sourceRoot":"/Users/yejiaming/Desktop/jmyour/vue-ui","sourcesContent":["/**\n * Created by yejiaming on 2017/9/28.\n */\n/**\n * Created by yejiaming on 2017/2/23.\n */\n/*获取滚动目标节点对象*/\nvar getScrollEventTarget = function (element) {\n    let currentNode = element;\n    while (currentNode && currentNode.tagName !== 'HTML' &&\n    currentNode.tagName !== 'BODY' && currentNode.nodeType === 1) {\n        let overflowY = document.defaultView.getComputedStyle(currentNode).overflowY;\n        if (overflowY === 'scroll' || overflowY === 'auto') {\n            return currentNode;\n        }\n        currentNode = currentNode.parentNode;\n    }\n    return window;\n};\n/*判断浏览器是否支持某一个属性，和该属性的某一个值*/\nvar cssSupport = function (attr, value) {\n    var element = document.createElement('div');\n    if (attr in element.style) {\n        element.style[attr] = value;\n        return element.style[attr] === value;\n    } else {\n        return false;\n    }\n}\nexport var sticky = {\n    // 当绑定元素插入到 DOM 中。\n    bind: function (el, binding, vnode) {\n        // console.log('首次加载挂载到DOM节点中——一次挂载之运行一次');\n    },\n    inserted: function (el, binding) {\n        // console.log('DOM节点挂载到完毕——一次挂载之运行一次');\n        var target = getScrollEventTarget(el);\n        if(target !== el.parentNode) {\n            console.error('当前含有stocky的节点，其父节点必须是滚动条的所在节点');\n        }else if (cssSupport('position', 'sticky')) {\n            return;\n        }\n\n        var top = binding.value ? binding.value : 0;\n        target.addEventListener('scroll', ()=> {\n            if (el.getBoundingClientRect().top < top) {\n                el.style.position = 'fixed';\n            }\n            if (target.scrollTop == 0) {\n                el.style.position = '';\n            }\n        })\n    },\n    update: function (el, binding) {\n\n    },\n    componentUpdated: function (el, binding) {\n        // console.log('完成更新DOM节点或者绑定数据——一次挂载之运行多次');\n    },\n    unbind: function (el, binding) {\n        // console.log('取消该节点的挂载——一次挂载之运行一次');\n    }\n};\n"]}